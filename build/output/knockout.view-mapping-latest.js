/// Knockout View Mapping plugin v0.2
/// (c) 2013 43r89ijf - https://github.com/43r89ijf
/// License: MIT (http://www.opensource.org/licenses/mit-license.php)
(function(c){"function"===typeof require&&"object"===typeof exports&&"object"===typeof module?c(require("knockout"),exports):"function"===typeof define&&define.amd?define(["knockout","exports"],c):c(ko,ko.viewMapping={})})(function(c,m){function k(d,a){if(!d)return a;for(var h=d.innerHTML.replace(l," "),b,e,f,g;null!=(b=n.exec(h));)b=b[1],b=b.split(","),c.utils.arrayForEach(b,function(b){if(e=p.exec(b))f=e[1],g=e[2],"undefined"==typeof a[g]&&("text"==f||"value"==f?a[g]=c.observable():"checked"==f?
a[g]=c.observable(!1):"options"==f?a[g]=[]:"selectedOptions"==f&&(a[g]=c.observable([])))});return a}var n=RegExp(/\s+data-bind\s*=\s*\"([^\"]+)\s*\"/g),p=RegExp(/(text|value|checked|options|selectedOptions)\s*\:\s*([\w\$]+)/),q=RegExp(/\s+data-bind\s*=\s*\".*template\s*\:\s*\{\s*name\s*\:\s*\'([^\']+)\'/g),l=RegExp(/([\r\n]|\x3c!--[\s\S]*?--\x3e)/g);m.execute=function(d,a,h){a||(a={});var b;if(d){if(b=document.getElementById(d),!b)throw Error("DOM element (id='"+d+"') is undefined.");}else throw Error("DOM element id is empty.");
a=k(b,a);d=b.innerHTML.replace(l," ");for(var e;null!=(b=q.exec(d));){e=document.getElementById(b[1]);if(!e)throw Error("Template (id='"+b[1]+"') is undefined.");a=k(e,a)}return a=c.mapping.fromJS(h,{},a)}});
